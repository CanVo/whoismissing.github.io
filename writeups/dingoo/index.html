<h1 id="dingoo-a320">Dingoo A320</h1>
<p><img src="images/dingoo.jpg" alt="Dingoo"></p>
<h3 id="features">Features</h3>
<ul>
<li>Portable Emulator</li>
<li>File viewer (Pictures)</li>
<li>Video / Audio player</li>
<li>Text reader</li>
<li>SWF viewer (Flash 6)</li>
</ul>
<p>Firmware V1.03</p>
<p>OS: MicroC/OS</p>
<h2 id="research-begins">Research Begins</h2>
<p>Downloaded the firmware file <em>a320.HXF</em></p>
<p><strong>binwalk -Me a320.HXF</strong></p>
<ul>
<li>binwalk didn&#39;t work, so HXF is unsupported</li>
</ul>
<p><strong>strings a320.HXF | head</strong></p>
<pre><code><span class="hljs-symbol">WADFxxxxxxxxx</span>
<span class="hljs-symbol">Chinachip</span> PMP Firmware <span class="hljs-built_in">V1</span>.<span class="hljs-number">0</span>
</code></pre><h3 id="firmware-file-structures">Firmware File Structures</h3>
<h4 id="hxf-header-struct">HXF Header Struct</h4>
<p>Found at <a href="https://www.rockbox.org/wiki/ChinaChip">rockbox</a></p>
<pre><code>typedef struct
{
   <span class="hljs-keyword">CHAR</span> Main_Header[<span class="hljs-number">20</span>]<span class="hljs-comment">;</span>
   UINT Size<span class="hljs-comment">;</span>
   UINT Checksum<span class="hljs-comment">;</span>
   UINT Unk<span class="hljs-comment">;</span>
   <span class="hljs-keyword">CHAR</span> Other_Header[<span class="hljs-number">32</span>]<span class="hljs-comment">;</span>
} HEADER<span class="hljs-comment">;</span>
</code></pre><h4 id="hxf-firmware-file-format-offsets">HXF Firmware File Format Offsets</h4>
<p><strong>Header - 64 bytes</strong></p>
<table>
<thead>
<tr>
<th>Offset</th>
<th style="text-align:center">Length</th>
<th style="text-align:left">Contents</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x0000</td>
<td style="text-align:center">4</td>
<td style="text-align:left">Signature</td>
</tr>
<tr>
<td>0x0004</td>
<td style="text-align:center">4</td>
<td style="text-align:left">Unknown</td>
</tr>
<tr>
<td>0x0008</td>
<td style="text-align:center">12</td>
<td style="text-align:left">Firmware timestamp</td>
</tr>
<tr>
<td>0x0014</td>
<td style="text-align:center">4</td>
<td style="text-align:left">Achive size in bytes</td>
</tr>
<tr>
<td>0x0018</td>
<td style="text-align:center">4</td>
<td style="text-align:left">Checksum</td>
</tr>
<tr>
<td>0x001c</td>
<td style="text-align:center">4</td>
<td style="text-align:left">Unknown</td>
</tr>
<tr>
<td>0x0020</td>
<td style="text-align:center">32</td>
<td style="text-align:left">Identifier &quot;Chinachip PMP firmware V1.0&quot; padded with zeros</td>
</tr>
</tbody>
</table>
<p><strong>File entries - starting from 64 bytes onwards</strong></p>
<table>
<thead>
<tr>
<th>Section</th>
<th style="text-align:center">Length</th>
<th style="text-align:left">Contents</th>
</tr>
</thead>
<tbody>
<tr>
<td>Path Length</td>
<td style="text-align:center">4</td>
<td style="text-align:left">Size of the file path in the next section</td>
</tr>
<tr>
<td>File path</td>
<td style="text-align:center">variable</td>
<td style="text-align:left">Full file path &quot;game\snake\common\1shenti1.s3dtex&quot;</td>
</tr>
<tr>
<td>File type</td>
<td style="text-align:center">1</td>
<td style="text-align:left">0x20 or 0x21</td>
</tr>
<tr>
<td>File size</td>
<td style="text-align:center">4</td>
<td style="text-align:left">Size of file data in the next section</td>
</tr>
<tr>
<td>File data</td>
<td style="text-align:center">variable</td>
<td style="text-align:left">File data NOTE: NOT PADDED</td>
</tr>
</tbody>
</table>
<h3 id="custom-extractor-python">Custom Extractor - Python</h3>
<pre><code class="lang-python"><span class="hljs-keyword">print</span> <span class="hljs-built_in">s</span>
</code></pre>
<h4 id="future-work-">Future work:</h4>
<ul>
<li>Study boot sequence</li>
<li>Sift through disassembly</li>
<li>Look through .dl files</li>
<li>Firmwalker</li>
<li>Attempt emulation</li>
</ul>

